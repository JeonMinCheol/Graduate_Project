syntax = "proto3";

package message;

service grpcService{
 rpc sendState(SelectedStates) returns (GlobalState) {}
 rpc sendSingleState(SelectedState) returns (EmptyResponse) {}
 rpc randomSample(RequestRandomIndices) returns (ResponseRandomIndices) {}
}

message SelectedState {
  bytes state = 1;
}

message EmptyResponse {
  string message = 1;
}

message SelectedStates {
  bytes state = 1;
  string setting = 2;
  repeated float weights = 3;
}

message GlobalState {
  bytes state = 1;
}

message RequestRandomIndices {
  int32 num_clients = 1;  // 디바이스 개수
  int32 num_samples = 2;  // 샘플링할 개수
}

message ResponseRandomIndices {
  repeated int32 device_indices = 1;  // 선택된 디바이스 인덱스 리스트
}